# C언어를 이용한 이미지 처리 및 MEM 파일 생성 학습 (2025-08-29)

## 1. 24비트 컬러 BMP를 8비트 그레이스케일로 변환

### 목표
컬러 이미지(`brainct_001.bmp`)를 흑백 이미지(`output_grayscale.bmp`)로 변환합니다.

### 변환 원리
컴퓨터는 색상을 빛의 삼원색인 빨강(Red), 초록(Green), 파랑(Blue)의 조합으로 표현합니다. 24비트 컬러는 각 색상에 8비트(0~255)를 할당하여 약 1600만 가지 색을 나타냅니다.

그레이스케일(흑백)은 밝기 정보만으로 색을 표현합니다. 컬러 픽셀을 흑백으로 바꾸기 위해 각 색상의 밝기 기여도를 고려한 **휘도(Luminance) 공식**을 사용합니다.

> **Y = 0.299 * R + 0.587 * G + 0.114 * B**

-   **Y**: 흑백의 밝기 값 (Luminance)
-   **R, G, B**: 해당 픽셀의 빨강, 초록, 파랑 값

사람의 눈은 초록색에 가장 민감하고 파란색에 가장 둔감하기 때문에 각 색상에 다른 가중치를 부여합니다.

### C 코드의 역할
작성된 `bmp_to_mem_converter.c` 코드는 다음과 같은 작업을 수행합니다.
1.  BMP 파일의 헤더를 읽어 이미지의 크기, 비트 수 등 정보를 확인합니다.
2.  이미지의 각 픽셀(RGB) 데이터를 읽어옵니다.
3.  모든 픽셀에 휘도 공식을 적용하여 8비트 그레이스케일 값으로 변환합니다.
4.  변환된 픽셀 데이터와 새로운 헤더(8비트용)를 사용하여 `output_grayscale.bmp` 파일을 생성합니다.

---

## 2. Verilog 시뮬레이션을 위한 MEM 파일 생성

### 목표
변환된 그레이스케일 이미지 데이터를 Verilog 시뮬레이션에서 메모리 초기값으로 사용할 수 있는 `.mem` 파일을 생성합니다.

### 생성 방식
이미지는 픽셀의 2차원 배열입니다. 이 픽셀 데이터를 Verilog의 메모리(BRAM 등)에 로드하기 위해 텍스트 형식의 파일로 만듭니다.

-   **출력 파일**: `output_image.mem`
-   **형식**: 630x630개의 픽셀 값을 순서대로, 한 줄에 하나씩 16진수(Hex)로 변환하여 저장합니다.
    -   예: 픽셀 값이 10이면 `0A`, 255이면 `FF`로 저장됩니다.

### C 코드 로직
```c
// MEM 파일에 그레이스케일 데이터를 16진수로 쓰기
// 각 픽셀값을 2자리 16진수로 변환하고 줄바꿈으로 구분
for (int i = 0; i < IMAGE_WIDTH * IMAGE_HEIGHT; i++) {
    fprintf(memOutFile, "%02X\n", grayscaleData[i]);
}
```
이 코드는 모든 픽셀을 순회하며 `fprintf` 함수를 통해 형식에 맞춰 파일에 씁니다.

```
